<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Endpoint Gemini</title>
</head>
<body>

<pre id="output">Procesando...</pre>

<script>
// Rol fijo
const SYSTEM_PROMPT = `
Eres un profesor experto en entrevistas técnicas, algoritmos,
programación competitiva (LeetCode, Codeforces), estructuras de datos,
y preparación extrema para retos técnicos.
Explicas con precisión, claridad y foco en la resolución práctica.
`;

// Obtener solo el mensaje del usuario
const params = new URLSearchParams(window.location.search);
const userMsg = params.get("msg");

if (!userMsg) {
  document.getElementById("output").innerText =
    "Falta parámetro: usa ?msg=tu_pregunta";
} else {
  askGemini(userMsg);
}

async function askGemini(message) {
  try {
    const response = await fetch(
      "https://generativelanguage.googleapis.com/v1beta/openai/chat/completions?key=AIzaSyAOMSB-lHfxLwlWT8HIUpoEU-hxOvahLk8",
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: "gemini-1.5-pro",
          messages: [
            { role: "system", content: SYSTEM_PROMPT },
            { role: "user", content: message }
          ]
        })
      }
    );

    const data = await response.json();
    const text =
      data?.choices?.[0]?.message?.content ||
      "Sin respuesta del modelo";

    document.getElementById("output").innerText = text;
  } catch (e) {
    document.getElementById("output").innerText =
      "Error: " + e.message;
  }
}
</script>

</body>
</html>




